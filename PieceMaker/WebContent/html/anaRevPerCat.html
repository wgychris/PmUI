<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">
<link rel="shortcut icon" href="images/favicon.png">

<title>PieceMaker</title>
<link
	href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,400italic,700,800'
	rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Raleway:300,200,100'
	rel='stylesheet' type='text/css'>

<!-- Bootstrap core CSS -->
<link href="js/bootstrap/dist/css/bootstrap.css" rel="stylesheet">
<link rel="stylesheet" type="text/css"
	href="js/bootstrap.switch/bootstrap-switch.min.css" />
<link rel="stylesheet" type="text/css"
	href="js/bootstrap.datetimepicker/css/bootstrap-datetimepicker.min.css" />

<!-- Select2 -->
<link rel="stylesheet" type="text/css"
	href="js/jquery.select2/select2.css" />


<!-- Slider -->
<link rel="stylesheet" type="text/css"
	href="js/bootstrap.slider/css/slider.css" />

<!-- DateRange -->
<link rel="stylesheet" type="text/css"
	href="js/bootstrap.daterangepicker/daterangepicker-bs3.css" />

<!-- Custom styles for this template -->
<link href="css/style.css" rel="stylesheet" />

<link rel="stylesheet"
	href="fonts/font-awesome-4/css/font-awesome.min.css">
<link rel="stylesheet" href="css/pygments.css">

<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <![endif]-->
<link rel="stylesheet" type="text/css"
	href="js/jquery.nanoscroller/nanoscroller.css" />
<link href="js/jquery.icheck/skins/square/blue.css" rel="stylesheet">

</head>

<body>

	<!-- Fixed navbar -->
	<div id="head-nav" class="navbar navbar-default navbar-fixed-top">
		<div class="container-fluid">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse"
					data-target=".navbar-collapse">
					<span class="fa fa-gear"></span>
				</button>
				<a class="navbar-brand" href="#"><span>PieceMaker</span></a>
			</div>
			<div class="navbar-collapse collapse">
				<ul class="nav navbar-nav">
					<li><a href="#">Home</a></li>
				</ul>
				<!-- <ul class="nav navbar-nav">
					<li class="active"><a href="#">Home</a></li>
					<li><a href="#about">About</a></li>
					<li class="dropdown"><a href="#" class="dropdown-toggle"
						data-toggle="dropdown">Contact <b class="caret"></b></a>
						<ul class="dropdown-menu">
							<li><a href="#">Action</a></li>
							<li><a href="#">Another action</a></li>
							<li><a href="#">Something else here</a></li>
							<li class="dropdown-submenu"><a href="#">Sub menu</a>
								<ul class="dropdown-menu">
									<li><a href="#">Action</a></li>
									<li><a href="#">Another action</a></li>
									<li><a href="#">Something else here</a></li>
								</ul></li>
						</ul></li>
					<li class="dropdown"><a href="#" class="dropdown-toggle"
						data-toggle="dropdown">Dashboard <b class="caret"></b></a>
						</li>
				</ul> -->
				<ul class="nav navbar-nav navbar-right user-nav">
					<li><a href="#">Dashboard</a></li>
					<li class="dropdown profile_menu"><a href="#"
						class="dropdown-toggle" data-toggle="dropdown"><img
							alt="Avatar" src="images/avatar2.jpg"><span>Jeff
								Hanneman</span> <b class="caret"></b></a>
						<ul class="dropdown-menu">
							<li><a href="#">My Account</a></li>
							<li><a href="#">Profile</a></li>
							<li><a href="#">Messages</a></li>
							<li class="divider"></li>
							<li><a href="#">Sign Out</a></li>
						</ul></li>
				</ul>

			</div>
			<!--/.nav-collapse -->
		</div>
	</div>


	<div id="cl-wrapper">
		<div class="cl-sidebar">
			<div class="cl-toggle">
				<i class="fa fa-bars"></i>
			</div>
			<div class="cl-navblock">
				<div class="menu-space">
					<div class="content">
						<div class="side-user">
							<div class="info">
								<a href="#">Piecemaker Analytics</a>
							</div>
						</div>
						<ul class="cl-vnavigation">

							<li><a href="#"><i class="fa fa-home"></i><span>Revenue
										Analysis</span></a>
								<ul class="sub-menu">
									<li><a href="anaTotRev.html">Total Revenue</a></li>
									<li><a href="anaRevPerCat.html">Revenue Per Category</a></li>
									<li><a href="anaRevPerPie.html">Revenue Per Piece</a></li>
								</ul></li>

							<li><a href="#"><i class="fa fa-home"></i><span>Customer
										Behaviour Analysis</span></a>
								<ul class="sub-menu">
									<li><a href="anaCBTPer.html">Percentage</a></li>
									<li><a href="anaAvgTime.html">Average Time</a></li>
								</ul></li>

							<li><a href="#"><i class="fa fa-home"></i><span>Popularity</span></a>
								<ul class="sub-menu">
									<li><a href="anaPopPiece.html">Popularity of Piece</a></li>
									<li><a href="anaPopCus.html">Popularity of Customization</a></li>
								</ul></li>
						</ul>
					</div>
				</div>
				<div class="text-right collapse-button" style="padding: 7px 9px;">
					<input type="text" class="form-control search"
						placeholder="Search..." />
					<button id="sidebar-collapse" class="btn btn-default" style="">
						<i style="color: #fff;" class="fa fa-angle-left"></i>
					</button>
				</div>
			</div>
		</div>



		<div class="container-fluid" id="pcont">
			<div class="page-head">
				<ol class="breadcrumb">
					<li><a href="#">Home</a></li>
					<li><a href="#">Revenue Analytics</a></li>
					<li class="active">Revenue Per Category</li>
				</ol>
			</div>
			

			<div class="cl-mcont">
				<div class="row">


					<div class="col-sm-12 col-md-12">

						<div class="block-flat">

							<div id="revenuePerCat">
								<p>Chart of Piece</p>
							</div>
						</div>

					</div>
				</div>
			</div>
		</div>

	</div>
	<script
		src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script src="http://code.highcharts.com/highcharts.js"></script>
	<script src="http://code.highcharts.com/modules/exporting.js"></script>

	<script type="text/javascript"
		src="js/jquery.nanoscroller/jquery.nanoscroller.js"></script>
	<script type="text/javascript"
		src="js/jquery.sparkline/jquery.sparkline.min.js"></script>
	<script type="text/javascript"
		src="js/jquery.easypiechart/jquery.easy-pie-chart.js"></script>
	<script type="text/javascript" src="js/behaviour/general.js"></script>
	<script src="js/jquery.ui/jquery-ui.js" type="text/javascript"></script>
	<script type="text/javascript"
		src="js/jquery.nestable/jquery.nestable.js"></script>
	<script type="text/javascript"
		src="js/bootstrap.switch/bootstrap-switch.min.js"></script>
	<script type="text/javascript"
		src="js/bootstrap.datetimepicker/js/bootstrap-datetimepicker.min.js"></script>
	<script src="js/jquery.select2/select2.min.js" type="text/javascript"></script>
	<script src="js/bootstrap.slider/js/bootstrap-slider.js"
		type="text/javascript"></script>
	<script type="text/javascript"
		src="js/jquery.gritter/js/jquery.gritter.js"></script>

	<script type="text/javascript">
		$(document).ready(function() {
			//initialize the javascript
			App.init();
			App.charts();
		});
	</script>

<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/data.js"></script>
<script src="http://code.highcharts.com/modules/drilldown.js"></script>

<div id="container" style="min-width: 310px; max-width: 600px; height: 400px; margin: 0 auto"></div>

<!-- Data from www.netmarketshare.com. Select Browsers => Desktop share by version. Download as tsv. -->
<pre id="tsv" style="display:none">Browser Version	Total Market Share
Jewery 8.0	26.61%
Jewery 9.0	16.96%
Popular 18.0	8.01%
Popular 19.0	7.73%
Fashion 12	6.72%
Jewery 6.0	6.40%
Fashion 11	4.72%
Jewery 7.0	3.55%
Other 5.1	3.53%
Fashion 13	2.16%
Fashion 3.6	1.87%
Popular 17.0	1.13%
Fashion 10	0.90%
Other 5.0	2.35%
Fashion 9.0	0.65%
Fashion 8.0	0.55%
Fashion 4.0	0.50%
Popular 16.0	0.45%
Fashion 3.0	0.36%
Fashion 3.5	0.36%
Fashion 6.0	0.32%
Fashion 5.0	0.31%
Fashion 7.0	0.29%
Popular 18.0 - Maxthon Edition	0.55%
Popular 14.0	0.25%
Popular 20.0	0.24%
Popular 15.0	0.18%
Popular 12.0	0.16%
Other 4.0	0.14%
Popular 13.0	0.13%
Other 4.1	0.12%
Popular 11.0	0.10%
Fashion 14	0.10%
Fashion 2.0	0.09%
Popular 10.0	0.09%
Jewery 8.0 - Tencent Traveler Edition	0.09%</pre>

<script>
	$(function () {

    Highcharts.data({
        csv: document.getElementById('tsv').innerHTML,
        itemDelimiter: '\t',
        parsed: function (columns) {

            var brands = {},
                brandsData = [],
                versions = {},
                drilldownSeries = [];
            
            // Parse percentage strings
            columns[1] = $.map(columns[1], function (value) {
                if (value.indexOf('%') === value.length - 1) {
                    value = parseFloat(value);
                }
                return value;
            });

            $.each(columns[0], function (i, name) {
                var brand,
                    version;

                if (i > 0) {

                    // Remove special edition notes
                    name = name.split(' -')[0];

                    // Split into brand and version
                    version = name.match(/([0-9]+[\.0-9x]*)/);
                    if (version) {
                        version = version[0];
                    }
                    brand = name.replace(version, '');

                    // Create the main data
                    if (!brands[brand]) {
                        brands[brand] = columns[1][i];
                    } else {
                        brands[brand] += columns[1][i];
                    }

                    // Create the version data
                    if (version !== null) {
                        if (!versions[brand]) {
                            versions[brand] = [];
                        }
                        versions[brand].push([ version, columns[1][i]]);
                    }
                }
                
            });

            $.each(brands, function (name, y) {
                brandsData.push({ 
                    name: name, 
                    y: y,
                    drilldown: versions[name] ? name : null
                });
            });
            $.each(versions, function (key, value) {
                drilldownSeries.push({
                    name: key,
                    id: key,
                    data: value
                });
            });

            // Create the chart
            $('#revenuePerCat').highcharts({
                chart: {
                    type: 'pie'
                },
                title: {
                    text: 'Revenue Per Category'
                },
                plotOptions: {
                    series: {
                        dataLabels: {
                            enabled: true,
                            format: '{point.name}: {point.y:.1f}%'
                        }
                    }
                },

                tooltip: {
                    headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                    pointFormat: '<span style="color:{point.color}">{point.name}</span>: <b>{point.y:.2f}%</b> of total<br/>'
                }, 

                series: [{
                    name: 'Brands',
                    colorByPoint: true,
                    data: brandsData
                }],
                drilldown: {
                    series: drilldownSeries
                }
            })

        }
    });
});
    
</script>

	<!-- Bootstrap core JavaScript
    ================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="js/behaviour/voice-commands.js"></script>
	<script src="js/bootstrap/dist/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="js/jquery.flot/jquery.flot.js"></script>
	<script type="text/javascript" src="js/jquery.flot/jquery.flot.pie.js"></script>
	<script type="text/javascript"
		src="js/jquery.flot/jquery.flot.resize.js"></script>
	<script type="text/javascript"
		src="js/jquery.flot/jquery.flot.labels.js"></script>
</body>
</html>
